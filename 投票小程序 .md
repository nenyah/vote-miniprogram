## 投票小程序设计文档

Author: steven Date: 2020-09-11 Version：0.0.1

#### 一、需求分析

![](%E6%8A%95%E7%A5%A8%E5%B0%8F%E7%A8%8B%E5%BA%8F%20.assets/image-20200914101236489.png)

问题：

1. 怎么判断是否关注公众号？

			2. 授权获取信息与关注公众号怎么显示？
   			3. 生成二维码的信息从哪儿获取？

#### 二、页面结构

![image-20200914095056419](%E6%8A%95%E7%A5%A8%E5%B0%8F%E7%A8%8B%E5%BA%8F%20.assets/image-20200914095056419.png)

#### 三、数据结构

![image-20200914095114255](%E6%8A%95%E7%A5%A8%E5%B0%8F%E7%A8%8B%E5%BA%8F%20.assets/image-20200914095114255.png)

选手：

```typescript
export interface Iitem {
  id: number // 选手编号
  name: string // 选手名称
  img: string // 选手图片
  company?: string // 选手公司
  group?: string // 选手分组
  show?:string // 选手风采
  desc: string // 选手简介
  stats: Iinfo[] // 统计信息
}
```

活动:

```typescript
export interface Iactivate {
  id: number // 活动编号
  name: string //活动名称
  bannerImg: string[] //广告图片
  startTime: string //开始时间
  endTime: string //结束时间
  rule: Iinfo[] // 活动规则
  desc: string //活动描述
  status:'ONGOING'|'ENDED'|'ISCOMING' // 活动状态
  stats: Iinfo[] // 统计信息
}
```

信息项：

```typescript
// 属性
export interface Iinfo {
  name: string // 属性名称
  value: number // 属性值
}
```

投票规则:

```typescript
export const rule: Array<Iinfo> = [
  {
    name: "每个微信号每天可以投",
    value: 3,
  },
  {
    name: "每天可为同一选手投",
    value: 1,
  },
  {
    name: "每天最少投票",
    value: 1,
  },
]
```

活动统计：

```typescript
export const activateStats: Array<Iinfo> = [
  {
    name: "参与人数",
    value: 0,
  },
  {
    name: "累计票数",
    value: 0,
  },
  {
    name: "累计访问",
    value: 0,
  },
]
```

选手统计:

```typescript
export const itemStats: Array<Iinfo> = [
  {
    name: "当前票数",
    value: 0,
  },
  {
    name: "排名",
    value: 0,
  },
  {
    name: "距上一名",
    value: 0,
  },
]
```

